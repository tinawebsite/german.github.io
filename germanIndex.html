<!DOCTYPE html>
<html style="background-color:#b3ffd7">
<head>
	<title>French</title>
</head>
<body>

	<form style="background-color:#b3fcff"> 			
		<section><input type="checkbox" id="firstCheck" > First Class</section>
		<br>
		<section><input type="checkbox" id="lastCheck"> Last Class</section>
		<br>
		<section><input type="checkbox" id="allCheck"> All Classes</section>
	</form>

	<h3 id = "deutsche1"></h3>
	<h3 id = "deutsche2"></h3>
	<h3 id = "deutsche3"></h3>
	<h3 id = "deutsche4"></h3>
	<h3 id = "deutsche5"></h3>
	<h3 id = "deutsche6"></h3>
	<h3 id = "deutsche7"></h3>
	<h3 id = "deutsche8"></h3>

	<script>
		var numOfLessons = 0

		function Lesson(num, teacher, json, title) {
 			this.num = num
  			this.teacher = teacher  			
  			this.json = json
  			this.title = title
		}
		
			var deutsche1 = new Lesson(1, "Frau Sheikh", "https://api.myjson.com/bins/houcp", "Numbers 0-19") ; var numOfLessons = numOfLessons + 1
			var deutsche2 = new Lesson(2, "Frau King", "https://api.myjson.com/bins/a9v5x", "Greetings") ; var numOfLessons = numOfLessons + 1
			var deutsche3 = new Lesson(3, "Frau King", "https://api.myjson.com/bins/luvl5", "Numbers 20-100") ; var numOfLessons = numOfLessons + 1
			var deutsche4 = new Lesson(4, "Frau Sheikh", "https://api.myjson.com/bins/1dwe6h", "Months") ; var numOfLessons = numOfLessons + 1	
			var deutsche5 = new Lesson(5, "Frau Sheikh", "https://api.myjson.com/bins/6hw6h", "The Verb 'Sein'") ; var numOfLessons = numOfLessons + 1		
			var deutsche6 = new Lesson(6, "Frau Sheikh", "https://api.myjson.com/bins/lz5wp", "Dates") ; var numOfLessons = numOfLessons + 1	
			var deutsche7 = new Lesson(7, "Frau King", "https://api.myjson.com/bins/18eab9", "The Verb 'Haben'") ; var numOfLessons = numOfLessons + 1	
			var deutsche8 = new Lesson(8, "Frau Sheikh", "https://api.myjson.com/bins/pkfm1", "Countries") ; var numOfLessons = numOfLessons + 1	

		window.localStorage.setItem("numOfLessons",  numOfLessons)
	</script>

	
	<script>
		document.getElementById("firstCheck").addEventListener( "change", function(){
			if(this.checked) {
				fetch(deutsche1.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche1").innerHTML = JSON.stringify(myJson)})
			}else{
				fetch(deutsche1.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche1").innerHTML = ""})
				}
		})

		document.getElementById("lastCheck").addEventListener( "change", function(){
			if(this.checked) {
			commonLesson = 'deutsche' ; str = commonLesson+' = ' + 'deutsche' + numOfLessons ; var lastResult = eval(str)
			fetch(lastResult.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche" + numOfLessons).innerHTML = JSON.stringify(myJson)})
			}else{
				commonLesson = 'deutsche' ; str = commonLesson+' = ' + 'deutsche' + numOfLessons ; var lastResult = eval(str)
					fetch(lastResult.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche" + numOfLessons).innerHTML = ""})
			}
	    })

		document.getElementById("allCheck").addEventListener( "change", function(){
	    	if(this.checked) {
	        	console.log("is checked")
	        	console.log("At the moment there are " + window.localStorage.getItem("numOfLessons") + " lessons.")
	        	commonLesson = 'deutsche' 
	       		for (let step = 1; step < window.localStorage.getItem("numOfLessons"); step++) {
					str = commonLesson+' = ' + 'deutsche' + step ; var allResult = eval(str)
					fetch(allResult.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche" + step).innerHTML = JSON.stringify(myJson)})
				}
	    	} else {
	       		for (let step = 1; step < window.localStorage.getItem("numOfLessons"); step++) {
					commonLesson = 'deutsche' ; str = commonLesson+' = ' + 'deutsche' + step ; var allResult = eval(str)
					fetch(allResult.json).then(function(response){return response.json()}).then(function(myJson){document.getElementById("deutsche" + step).innerHTML = ""})
				}
	    	}
		})
	</script>
</body>
</html>